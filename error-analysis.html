<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>Error analysis</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/united.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<script src="site_libs/htmlwidgets-1.3/htmlwidgets.js"></script>
<script src="site_libs/plotly-binding-4.9.0/plotly.js"></script>
<script src="site_libs/typedarray-0.1/typedarray.min.js"></script>
<link href="site_libs/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
<script src="site_libs/crosstalk-1.0.0/js/crosstalk.min.js"></script>
<link href="site_libs/plotly-htmlwidgets-css-1.46.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="site_libs/plotly-main-1.46.1/plotly-latest.min.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->



<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3,h4,h5",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = false;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}


.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}

.tocify-subheader {
  display: inline;
}
.tocify-subheader .tocify-item {
  font-size: 0.95em;
}

</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-inverse  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Wifi-Data-Exploration</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li>
  <a href="data-exploration.html">
    <span class="fa fa-chart-scatter"></span>
     
    Data Exploration
  </a>
</li>
<li>
  <a href="models-sample500.html">
    <span class="fa fa-chart-bar"></span>
     
    Basic Random Forest
  </a>
</li>
<li>
  <a href="error-analysis.html">
    <span class="fa fa-search"></span>
     
    Error Analysis
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="mailto:b@virgen.io">
    <span class="fa fa-envelope-o"></span>
     
    Contact me
  </a>
</li>
<li>
  <a href="https://github.com/beeleen">
    <span class="fa fa-github"></span>
     
    GitHub
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Error analysis</h1>

</div>


<h1>
Initialize and Load Data
</h1>
<pre class="r"><code># Initialize and Load Data {#init}
pacman::p_load(ggplot2, dplyr, party, caret, corrplot, reshape, rpart, rattle, psych, tidyr, stringr, randomForest, tictoc, plotly, readr,h2o, rstudioapi, randomForest, tibble)

setwd(&quot;~/Documents/@/UBIQUM/DATAML/ModuleIOT/wifi_github&quot;)

wifidataVal &lt;- read.csv(&quot;./Error_Analysis_Datasets/wifidataValidationPreprocessed.csv&quot;)
#wifidataValKNNBuilding &lt;- read.csv(&quot;~/Documents/@/UBIQUM/DATAML/ModuleIOT/WIFI/datasets/wifidataValidationPreprocessedKNN.csv&quot;)

#Remove Scientific notations
options(scipen=999)

#Seed function
 reset.seed &lt;- function()
{
  set.seed(1337)
 }
 

#wifidataVal %&gt;% filter(RealFloor==0, BUILDINGIDKNN==2)</code></pre>
<h1>
Make All predictions with Random Forest
</h1>
<pre class="r"><code>#RANDOM FOREST

#Load model from Building, Floor, Latitude and Longitude
load(&quot;Error_Analysis_Models/_WapsBuildingRF2.rda&quot;)
load(&quot;Error_Analysis_Models/_WapsFloorRF2.rda&quot;) 
load(&quot;Error_Analysis_Models/_WapsLatitudeRF2.rda&quot;)
load(&quot;Error_Analysis_Models/_WapsLongitudeRF2.rda&quot;)

#Predict Building in the Validation data
predrf_Building &lt;- predict(plsFitWapsBuilding, newdata = wifidataVal)

#Create a new column with predicted values for Building
wifidataVal$BUILDINGID &lt;- predrf_Building

#Predict Floor in the Validation data
predrf_Floor &lt;- predict(plsFitWapsFloor, newdata = wifidataVal)

#Create a new column with predicted values for Floor
wifidataVal$FLOOR &lt;- predrf_Floor

#Predict Latitude in the Validation data
predrf_Latitude &lt;- predict(plsFitWapsLatitude, newdata = wifidataVal)

#Create a new column with predicted values for Latitude
wifidataVal$LATITUDE &lt;- predrf_Latitude

#Predict Longitude in the Validation data
predrf_Longitude &lt;- predict(plsFitWapsLongitude, newdata = wifidataVal)

#Create a new column with predicted values for Longitude
wifidataVal$LONGITUDE &lt;- predrf_Longitude</code></pre>
<pre class="r"><code>#Load original dataset
wifidataValCOMPLETED &lt;- read.csv(&quot;~/Documents/@/UBIQUM/DATAML/ModuleIOT/WIFI/datasets/validationData.csv&quot;)
 
wifidataValCOMPLETED$BUILDINGID &lt;- as.factor(wifidataValCOMPLETED$BUILDINGID) 
wifidataValCOMPLETED$FLOOR &lt;- as.factor(wifidataValCOMPLETED$FLOOR) 




#Create an index of wifidataVal
wifidataVal &lt;- wifidataVal %&gt;% mutate(id = rownames(wifidataVal))


#Add the BUILDINGID from the Original dataset
wifidataVal$RealBuildingId &lt;- wifidataValCOMPLETED$BUILDINGID
wifidataVal$RealBuildingId &lt;- as.factor(wifidataVal$RealBuildingId) 

#Add the FLOOR from the Original dataset
wifidataVal$RealFloor &lt;- wifidataValCOMPLETED$FLOOR
wifidataVal$RealFloor &lt;- as.factor(wifidataVal$RealFloor) 

#Add the LONGITUDE from the Original dataset
wifidataVal$RealLongitude &lt;- wifidataValCOMPLETED$LONGITUDE

#Add the LATITUDE from the Original dataset
wifidataVal$RealLatitude &lt;- wifidataValCOMPLETED$LATITUDE

#Select only the Columns for Position
#wifidataValPositionVars &lt;-  wifidataVal %&gt;% select(RealFloor, RealLongitude, RealLatitude, RealBuildingId)</code></pre>
<h2>
Consufion Matrix
</h2>
<pre class="r"><code>#Confusion Matrix for Building
confusionMatrix(data= wifidataVal$BUILDINGID, reference =wifidataVal$RealBuildingId)</code></pre>
<pre><code>## Confusion Matrix and Statistics
## 
##           Reference
## Prediction   0   1   2
##          0 522   1   0
##          1   4 302   0
##          2  10   4 268
## 
## Overall Statistics
##                                                
##                Accuracy : 0.9829               
##                  95% CI : (0.9734, 0.9897)     
##     No Information Rate : 0.4824               
##     P-Value [Acc &gt; NIR] : &lt; 0.00000000000000022
##                                                
##                   Kappa : 0.9731               
##                                                
##  Mcnemar&#39;s Test P-Value : 0.001246             
## 
## Statistics by Class:
## 
##                      Class: 0 Class: 1 Class: 2
## Sensitivity            0.9739   0.9837   1.0000
## Specificity            0.9983   0.9950   0.9834
## Pos Pred Value         0.9981   0.9869   0.9504
## Neg Pred Value         0.9762   0.9938   1.0000
## Prevalence             0.4824   0.2763   0.2412
## Detection Rate         0.4698   0.2718   0.2412
## Detection Prevalence   0.4707   0.2754   0.2538
## Balanced Accuracy      0.9861   0.9894   0.9917</code></pre>
<h2>
3D Buildings for BUILDINGID
</h2>
<pre class="r"><code>#Analyzing the lowest Class Recall: Building 0
#Plot Building 0
plot_ly(wifidataVal %&gt;% filter(RealBuildingId==0) , x = ~RealLongitude, y = ~RealLatitude, z = ~RealFloor, size = 0.03) %&gt;% add_markers() %&gt;% layout(scene = list(xaxis = list(title = &quot;Longitude&quot;), yaxis = list(title = &quot;Latitude&quot;), zaxis = list(title = &quot;Floor&quot;)))</code></pre>
<div id="htmlwidget-72dfefc4911ddec8f404" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-72dfefc4911ddec8f404">{"x":{"visdat":{"4395eb642d3":["function () ","plotlyVisDat"]},"cur_data":"4395eb642d3","attrs":{"4395eb642d3":{"x":{},"y":{},"z":{},"size":0.03,"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter3d","mode":"markers","inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"scene":{"xaxis":{"title":"Longitude"},"yaxis":{"title":"Latitude"},"zaxis":{"title":"Floor"}},"hovermode":"closest","showlegend":false},"source":"A","config":{"showSendToCloud":false},"data":[{"x":[-7641.49930336811,-7586.94481643335,-7674.78528285577,-7656.47556055148,-7642.76498553336,-7680.01548397771,-7644.88606818517,-7639.40049465441,-7632.77760000154,-7607.07660000026,-7592.95318465368,-7588.9413926973,-7611.19622966315,-7615.52771818275,-7592.0902420462,-7616.35992587794,-7691.10920000076,-7685.49460000172,-7684.28183436243,-7682.45565000227,-7676.89365321925,-7675.64792157744,-7644.30384668973,-7656.99678122964,-7662.30642141684,-7662.44720000029,-7667.5438000001,-7643.69751699935,-7643.3229841197,-7646.6364422181,-7641.56309275237,-7641.0103391874,-7640.03067148614,-7638.02266043988,-7646.31449697698,-7618.41589999944,-7616.64529248978,-7605.24830000103,-7634.49445455261,-7632.2826035129,-7619.01281685433,-7616.7004386454,-7616.57226202036,-7610.89979999885,-7609.20937015864,-7601.69407579224,-7589.17943744184,-7637.92280000076,-7594.03489999846,-7593.92191744519,-7609.02120000124,-7621.81523590075,-7689.28420000151,-7662.30661873478,-7661.81719389679,-7637.08344395569,-7636.89562666263,-7592.56230000034,-7636.82069644866,-7638.19379999861,-7639.10963288269,-7638.01890505048,-7639.44559871065,-7640.84258744208,-7641.96091476219,-7640.41686663053,-7636.39292173685,-7642.67322616119,-7650.25597591234,-7616.89191416661,-7603.33590000123,-7603.33590000123,-7603.76030219803,-7595.97399999946,-7594.03489999846,-7587.13533110108,-7586.94368609796,-7594.26554122549,-7596.9070316277,-7603.0212026459,-7594.39246300444,-7592.23493529606,-7637.00921124037,-7596.47407934687,-7601.38699999824,-7634.21146584494,-7637.42379999906,-7639.59899999946,-7639.59486995363,-7641.13379999995,-7641.68039999902,-7641.80549602936,-7641.23338191367,-7640.09479999915,-7637.02140958562,-7632.48110239606,-7632.06980529327,-7632.9790759226,-7637.41882622743,-7637.31194382388,-7618.42008150594,-7610.50939999893,-7605.14416078203,-7592.57327100977,-7589.06621643408,-7594.10545720105,-7601.38699999824,-7609.07213901898,-7609.15270231509,-7616.85498512883,-7616.64107582037,-7633.87460000068,-7644.96017757034,-7646.18050000072,-7646.28556662826,-7653.34330144525,-7653.57921978039,-7635.22179999948,-7634.72619494539,-7632.37887962689,-7632.41680527046,-7637.42379999906,-7637.92280000076,-7639.59899999946,-7639.47659722773,-7639.64924147666,-7640.92504870708,-7639.16157609641,-7641.34508182549,-7638.57466337893,-7640.57130648855,-7636.88221927667,-7642.24656108151,-7646.69990000129,-7641.68039999902,-7642.22313555101,-7638.93947694178,-7637.70483357085,-7633.54917987814,-7640.31144951824,-7634.91499007346,-7632.25869999826,-7618.71421039816,-7656.91620950242,-7665.65401487475,-7674.2643398279,-7681.73091456826,-7689.28420000151,-7691.10920000076,-7682.07559027651,-7644.71326286231,-7646.73350000009,-7618.08735494098,-7641.74172147363,-7640.01652132002,-7637.55744279934,-7636.03333375106,-7645.55909999833,-7634.54482007356,-7633.89460000023,-7633.80223865017,-7632.52853256873,-7636.40018162799,-7638.91555082314,-7641.72529999912,-7616.09959999844,-7610.89979999885,-7642.31457045009,-7609.02120000124,-7602.67741797987,-7603.09437991335,-7595.97399999946,-7618.09711275516,-7594.52429311369,-7594.03489999846,-7592.16400306983,-7610.51213638386,-7602.78702383615,-7595.53920064076,-7588.03157166602,-7616.09959999844,-7642.66259999946,-7644.36514611238,-7649.33920000121,-7644.74650963789,-7633.34757969684,-7634.10611749949,-7637.42379999906,-7636.39813145096,-7637.63500148025,-7638.63771656823,-7653.34330144525,-7652.1528652179,-7644.27850836605,-7645.02567237488,-7646.57608967589,-7660.04540000111,-7661.86320000142,-7666.24808553979,-7673.91343881223,-7676.65703884553,-7676.7536999993,-7676.7536999993,-7676.61748795836,-7683.79114092282,-7644.01243109285,-7632.83449999988,-7633.87460000068,-7632.10820430452,-7634.40627116459,-7634.83329619327,-7634.22960016648,-7636.58283107598,-7637.5203338089,-7639.18656641044,-7638.81872605451,-7639.34531550156,-7641.38097897019,-7641.76361680523,-7631.76840685305,-7633.87460000068,-7633.87460000068,-7632.83449999988,-7632.83449999988,-7635.16969401381,-7636.67734827515,-7616.79854302343,-7635.33914135879,-7644.89383690554,-7644.18918638034,-7595.48529756011,-7604.55435196124,-7605.38465284047,-7604.88166140051,-7601.58873392738,-7596.37834523455,-7594.12514444316,-7594.84710000083,-7587.8004300002,-7602.9452936482,-7609.16681382845,-7609.36276363717,-7616.20041917674,-7616.53860484772,-7616.89829421054,-7616.97829999961,-7626.9702949484,-7621.66741620942,-7634.15520230315,-7632.7292540937,-7637.42379999906,-7637.18346461814,-7636.78198395717,-7636.5313301723,-7641.77412720016,-7640.71659360239,-7595.18075948703,-7602.93287420699,-7602.97878043871,-7603.13473217479,-7617.699243328,-7644.49536666771,-7675.64369799142,-7676.41943999976,-7653.34330144525,-7653.34330144525,-7653.34330144525,-7644.77762235441,-7645.61007713052,-7645.73244282327,-7653.34330144525,-7653.34330144525,-7653.34330144525,-7653.34330144525,-7652.24195690771,-7645.66078765751,-7632.83449999988,-7632.91792671521,-7633.24428423133,-7632.97439518767,-7633.63494048096,-7633.11873588188,-7616.30243891032,-7644.84284956768,-7645.19122501541,-7636.04019999877,-7618.48673235147,-7651.41523231597,-7611.30760181269,-7632.25869999826,-7664.31364314716,-7603.77416453538,-7635.19518085152,-7669.77241615707,-7602.84396409503,-7634.02642032568,-7595.9452289536,-7636.43874555932,-7593.60236454017,-7636.85720649032,-7681.34618817633,-7643.13024248254,-7586.7573395177,-7688.35524582161,-7642.14688754853,-7637.64212959382,-7590.07632944296,-7689.59942588326,-7589.36752477008,-7641.26870864985,-7634.7592674685,-7695.93195495232,-7587.86576666683,-7639.23914655748,-7637.92258811124,-7589.66182430459,-7594.57843749924,-7695.93875492993,-7640.43146639293,-7621.72256280307,-7689.26948530184,-7641.35243999958,-7603.1035000002,-7596.67706435433,-7636.95837206372,-7687.50924403569,-7611.24801023607,-7676.52328037604,-7639.55312374644,-7604.70751950987,-7669.02952319488,-7632.18845812838,-7609.72567500034,-7664.41765113302,-7661.83097326265,-7661.13608000129,-7631.74452740746,-7611.48368310262,-7608.8342816505,-7597.32616273094,-7651.83437469466,-7638.91029999902,-7586.49192155296,-7642.79786687392,-7616.94885038848,-7645.55840000138,-7667.04619501927,-7642.10423034345,-7676.7536999993,-7641.55958311506,-7648.11699999869,-7689.34599001969,-7627.53116620008,-7643.83309952775,-7588.60091504399,-7638.28677719352,-7655.81019999832,-7603.58481553918,-7636.081333523,-7634.4759214067,-7639.16957923134,-7661.60351428709,-7596.7272312755,-7689.89515880284,-7677.54941867467,-7660.74255472155,-7631.1041887758,-7615.03784338243,-7594.01834609583,-7636.55381600912,-7630.85557635979,-7640.92614999879,-7628.39150841153,-7633.23286410541,-7661.85839568238,-7587.43597205984,-7665.65022802308,-7647.46923873749,-7633.45898608972,-7669.35790000111,-7631.48092960883,-7673.74090851475,-7633.42757739689,-7638.03351093961,-7630.07808084597,-7641.68709610529,-7587.19017364645,-7677.58731648966,-7647.7909960721,-7629.57351466746,-7640.5182744042,-7673.82993483349,-7641.85357308761,-7638.85627681021,-7638.68211049602,-7682.39338181811,-7636.08128211181,-7685.15637872661,-7637.72554864112,-7684.47955430748,-7639.34507812383,-7638.17306341375,-7688.29800090835,-7630.37149396651,-7637.63310453536,-7603.83305060585,-7690.70364444537,-7642.19949886866,-7615.95449716446,-7632.83439999819,-7636.55369836812,-7652.1139684211,-7610.84766492977,-7663.16990063474,-7613.95819108402,-7658.42627815351,-7638.76801114954,-7639.75088308967,-7621.35118975999,-7641.31599999964,-7664.73931399603,-7646.73350000009,-7647.6823891074,-7633.12592727251,-7675.19930707522,-7635.06585463499,-7609.25457426757,-7661.93078816741,-7639.73585658524,-7602.88908000067,-7687.77642307058,-7637.40203407682,-7594.17022658178,-7638.17866494146,-7680.61785945725,-7683.86967332276,-7587.21240000054,-7639.75922967664,-7662.44720000029,-7661.25726666798,-7673.43529177297,-7642.30636126783,-7684.86795799028,-7682.79364999942,-7675.55208815544,-7690.50086666768,-7641.59924710024,-7643.28977726916,-7682.89431111059,-7628.52290073658,-7600.12173744662,-7692.2564497339,-7688.83309980671,-7646.69990000129,-7597.50172979364,-7690.25386062897,-7637.57703841605,-7637.10039249653,-7640.66951023089,-7688.65450289088,-7631.67139819036,-7642.33404309455,-7637.13640000139,-7635.62794169475,-7637.78295181145,-7646.26186493122,-7642.56660208688,-7609.02120000124,-7647.73149999976,-7641.1872897143,-7688.90760243901,-7634.40818225725,-7641.96513807264,-7592.86718465605,-7689.72425998869,-7660.28159442583,-7685.81477826264,-7631.0584588108,-7634.14477984211,-7616.1284334702,-7588.43323626153,-7639.16670284814,-7659.83335347808,-7666.18100366491,-7661.06751421715,-7674.58359754092,-7676.41943999976,-7600.79121998482,-7587.53908333369,-7618.98740990041,-7637.00156115084,-7593.08018465168,-7661.39425594081,-7636.89463750133,-7587.78890000021,-7601.15222627007,-7651.99609019241,-7684.45530712958,-7631.91103338733,-7674.82199543999,-7645.85951427959,-7637.58530044252,-7635.38288571366,-7682.53929816668,-7675.14641362094,-7632.96720386318,-7628.03855667361,-7637.18137786473,-7643.00019999966,-7691.7401813101,-7637.55456227177,-7640.15146665751,-7631.59079788505,-7641.44614285656,-7639.2054986208,-7641.03397269665,-7675.32093333287,-7642.55282222252,-7585.3899762246,-7646.34365890174,-7639.28210251345,-7636.82840000093,-7637.1877333348,-7637.07155531263,-7592.14951715568,-7591.87634305003,-7640.18192595257,-7682.36187952072,-7643.18740016522,-7661.08669792514,-7643.81766279067,-7641.78715398265,-7592.05095434257,-7637.53579816003,-7636.65400505291,-7637.94411999881],"y":[4864922.39917781,4864985.8591874,4864934.17609074,4864938.29791957,4865005.02531462,4864931.06532918,4864948.47653335,4864912.97794822,4864964.7989,4864977.6918,4864984.23600766,4864985.59057594,4864981.68552096,4864981.65892278,4864978.87642687,4864979.09533041,4864927.5252,4864929.1348,4864931.86802129,4864932.53290055,4864933.95646943,4864933.13878118,4864948.7810088,4864937.20383579,4864938.2719655,4864933.7721,4864937.5546,4864929.91511179,4864928.08658047,4864925.36349407,4864922.35505802,4864920.68700804,4864914.50935242,4864903.07802907,4864932.31557533,4864974.4413,4864976.24902887,4864978.2159,4864983.86347884,4864987.96421851,4864975.71671874,4864976.41989352,4864979.55970858,4864976.9343,4864978.21404511,4864980.07667125,4864985.27066531,4864993.3408,4864981.7684,4864982.04204241,4864977.473,4864976.10424105,4864928.0484,4864934.36715101,4864938.37254732,4864949.56319174,4864905.42273969,4864981.852,4864991.64683682,4864993.2706,4864999.14264838,4865000.23436776,4865001.21506283,4865006.61461257,4865008.76983066,4865010.64924526,4864951.45692939,4864947.68597467,4864937.11905396,4864979.16187527,4864979.1024,4864979.1024,4864979.78721273,4864981.2125,4864981.7684,4864985.99605849,4864985.92201844,4864983.82597524,4864983.12509262,4864981.02196974,4864982.32877039,4864978.25980826,4864993.70611592,4864983.24845654,4864979.6612,4864984.24410475,4864991.5989,4864999.1878,4865007.10462129,4865014.9502,4865016.8579,4865014.3586912,4865008.5548903,4865000.9183,4864993.48622219,4864987.95449594,4864982.08808637,4864965.22725023,4864955.69325027,4864955.82226685,4864974.84117645,4864982.554,4864978.71192022,4864984.10219659,4864985.33224475,4864981.95862272,4864979.6612,4864977.91577788,4864978.04042304,4864975.69891528,4864979.35878392,4864970.4821,4864948.71834876,4864933.0259,4864926.00290644,4864920.96325149,4864920.20018422,4864983.9177,4864986.13599949,4864988.06522986,4864988.14721207,4864991.5989,4864993.3408,4864999.1878,4865001.20051871,4865007.29426405,4865006.79804123,4864914.57565277,4865008.71753647,4864906.72651549,4865009.16298701,4864899.15906349,4865014.26575393,4864925.0411,4865016.8579,4865015.53803664,4864952.24733173,4864955.73177154,4864964.76870875,4864957.97150049,4864973.19002133,4864981.1231,4864971.3326379,4864937.62763416,4864936.72643714,4864934.19522275,4864931.85113189,4864928.0484,4864927.5252,4864931.22438543,4864929.17910975,4864925.0598,4864970.03305794,4864920.04827147,4864913.7152537,4864905.20627089,4864898.45175669,4864949.4074,4864965.7527715,4864970.446,4864984.07082246,4864987.43473785,4864992.67763199,4865000.86937801,4865006.6058,4864980.4364,4864976.9343,4865014.35609954,4864977.473,4864981.04718088,4864981.10680178,4864981.2125,4864976.56428246,4864983.70255453,4864981.7684,4864978.94446059,4864978.58944959,4864980.84854108,4864982.7153957,4864985.51979202,4864980.4363,4864928.1209,4864929.74060647,4864936.5404,4864948.35035318,4864984.85731575,4864983.98104736,4864991.5989,4864898.56127707,4864904.55095181,4864906.6674506,4864920.96325149,4864925.90626959,4864929.12712002,4864929.80102579,4864931.61135403,4864939.4127,4864938.8919,4864936.28686844,4864933.75290291,4864933.44839218,4864934.6235,4864934.6235,4864933.59586131,4864930.40131101,4864947.1886584,4864964.8305,4864970.4821,4864982.42988779,4864984.26527621,4864985.89606942,4864985.62274785,4864993.55639776,4864993.58200269,4864999.28742409,4864999.21356321,4865007.27142334,4865006.83435719,4865008.64152356,4864982.25775113,4864970.4821,4864970.4821,4864964.8305,4864964.8305,4864966.32790716,4864993.15039005,4864976.53030099,4864966.31194359,4864948.71736513,4864948.60365007,4864982.7225867,4864984.37617669,4864986.07525216,4864985.26091801,4864980.27329621,4864982.91750944,4864982.07401112,4864984.5189,4864986.53893,4864980.97737334,4864977.92499979,4864977.37505454,4864978.72057793,4864978.73758704,4864978.91003505,4864975.191825,4864979.47950319,4864976.46914108,4864984.06784388,4864987.35152893,4864991.59889999,4864993.45257394,4864993.8495243,4864993.90684433,4865010.4449637,4865008.04813466,4864982.78289028,4864980.72081256,4864980.72343701,4864980.5692673,4864977.88487317,4864948.8168,4864932.92988011,4864934.71934,4864920.96325149,4864920.96325149,4864920.96325149,4864917.96574232,4864918.17099721,4864918.39999642,4864920.9632515,4864920.96325149,4864920.9632515,4864920.96325149,4864922.75925641,4864918.20658478,4864964.8305,4864969.74029364,4864965.47331424,4864965.27158181,4864965.62844281,4864964.77103529,4864979.77388835,4864948.67153956,4864945.74851699,4864966.5763,4864975.57040936,4864934.24722499,4864977.42344549,4864981.12309999,4864935.94171298,4864979.60201216,4864985.96017461,4864935.27048836,4864981.81268828,4864984.09705941,4864981.47775863,4864991.85664854,4864984.36972274,4864994.49528199,4864931.88164595,4864946.6501597,4864985.59916676,4864929.22818364,4865017.3646842,4865000.81846463,4864985.11419064,4864933.84952397,4864981.48060956,4865012.99346326,4864966.11017487,4864931.43318821,4864986.5202,4864911.93974776,4865000.02050305,4864985.44919319,4864982.731375,4864931.80820487,4865009.384089,4864976.8343186,4864933.68280986,4865015.71328,4864981.0337375,4864982.98074112,4864904.75144224,4864929.575835,4864977.68260902,4864932.92392866,4864915.18108488,4864980.74518521,4864935.30840363,4864981.71495641,4864977.2709875,4864935.77067534,4864935.6821092,4864939.10022,4864987.55549873,4864978.02362483,4864978.36743754,4864982.56830639,4864933.71468638,4865000.25483334,4864985.58180075,4864924.11173886,4864979.69261693,4864949.40869999,4864936.20052303,4865014.82158361,4864934.62349999,4864919.86822476,4864944.7934,4864934.12260879,4864979.5454925,4865011.78265803,4864984.81730569,4864906.93779835,4864938.3647,4864979.52465928,4864901.11564377,4864986.22252179,4865000.82262034,4864938.9663,4864982.00636835,4864934.56470641,4864933.52769631,4864935.18217665,4864902.25053031,4864975.90392139,4864982.14102881,4864993.81403135,4864989.84993862,4864922.0629,4864895.9758312,4864970.39530986,4864934.81309648,4864986.14340587,4864936.34478932,4864924.89220556,4864965.0572292,4864936.7433,4864894.79584764,4864934.39592269,4864902.34045425,4864912.46378222,4864902.03109214,4865005.41568679,4864986.32066996,4864933.07547269,4864932.28614492,4864895.30891869,4864919.80713948,4864933.49043174,4864920.27497866,4865010.3999622,4864911.54200328,4864930.83715454,4864904.21843358,4864931.91239496,4864898.55458955,4864930.23672566,4865007.26677578,4864906.76625671,4864928.55749322,4864895.35310444,4864956.62065167,4864981.56046625,4864927.64146667,4865016.835496,4864975.51175694,4864964.83039999,4864899.33611379,4864934.37523669,4864977.25164681,4864933.58457304,4864982.64037315,4864938.04481003,4864907.2783529,4864915.30617124,4864975.9000848,4865015.5861,4864935.92915802,4864925.0598,4864944.16651411,4864964.9892091,4864933.04071336,4864984.35302551,4864978.3834198,4864937.99077533,4864958.07349949,4864981.61728,4864929.51018657,4864994.39722474,4864982.24056738,4864997.62650328,4864932.35872436,4864929.93372182,4864986.70750001,4865007.28422865,4864933.7721,4864939.0655,4864934.63670857,4865016.65220891,4864930.97325628,4864931.40064999,4864931.15975988,4864927.6996,4865008.68672456,4864947.55684339,4864931.53752221,4864978.18363054,4864980.27976536,4864929.11603139,4864932.10025755,4864925.0411,4864981.68444115,4864934.98338868,4865001.42679505,4864995.31852412,4864919.60737628,4864928.17847503,4864981.89816087,4865014.12730622,4864898.43348571,4864966.48143258,4865000.13852152,4864932.22359701,4865016.27466046,4864977.473,4864945.48879999,4865006.345573,4864932.30080884,4864967.38102955,4864922.32210464,4864983.3950449,4864934.48719379,4864937.49376101,4864929.86759399,4864989.36977494,4864986.43645938,4864977.14325118,4864980.97521445,4864913.05230293,4864938.75064922,4864936.7740493,4864937.40123332,4864934.30673881,4864934.71933999,4864980.85025873,4864986.61385,4864974.60357666,4864905.61976625,4864982.77095937,4864936.59814304,4864897.589675,4864986.5422353,4864980.74551564,4864934.5197158,4864930.91572201,4864965.83158611,4864934.58266896,4864945.18778203,4864955.44398898,4864984.47952857,4864932.53338664,4864932.8785124,4864988.28744872,4864950.3652254,4864993.98078911,4864930.3138,4864927.78429872,4865000.97789346,4865010.3316236,4864958.99603525,4865016.04031428,4865005.53546718,4865013.5498822,4864933.37678888,4864947.72018333,4864986.51705366,4864927.39055058,4864912.81933565,4864897.3584,4864898.61266666,4864908.67238174,4864978.76891258,4864978.33054233,4865005.7027313,4864932.2199657,4865004.92336985,4864935.22914026,4864930.43217081,4864902.44996542,4864978.45294343,4864903.22942466,4864904.935863,4864903.53590001],"z":["2","1","2","2","1","0","1","0","0","0","0","0","0","0","1","1","1","0","0","0","0","0","1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","0","0","0","0","0","0","0","0","0","0","0","0","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","2","0","0","0","0","0","2","2","2","2","2","2","2","2","2","2","2","2","2","1","1","1","1","1","1","1","1","1","1","2","1","2","1","2","1","2","1","1","2","0","1","2","1","1","1","3","3","3","3","3","3","3","3","3","1","3","3","3","3","3","3","3","3","3","3","3","3","1","1","3","1","1","1","1","3","1","1","1","3","3","3","3","3","1","1","1","1","1","1","1","1","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","1","1","1","1","0","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","2","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","2","2","2","2","2","2","2","2","2","2","2","2","1","1","1","1","1","1","1","1","1","2","1","2","1","2","1","1","2","1","1","3","1","2","1","3","1","1","1","1","3","2","1","2","1","3","1","0","2","1","3","2","2","1","2","3","2","2","2","2","2","2","2","2","2","2","2","2","3","2","1","2","2","2","2","3","2","2","3","2","2","1","2","2","2","2","1","1","2","3","2","2","1","2","2","2","2","1","2","0","3","1","2","2","2","2","0","3","2","2","0","2","1","1","2","1","1","1","1","1","1","0","3","1","2","0","2","1","0","0","2","1","2","1","1","1","2","1","1","2","0","3","1","2","0","3","1","1","3","1","0","1","1","1","3","2","1","1","1","2","1","3","3","1","0","3","1","3","3","1","1","1","3","3","2","3","2","3","2","1","3","2","3","3","1","3","1","1","1","2","1","1","3","3","2","3","3","3","2","3","3","3","3","3","3","3","0","2","3","3","0","1","0","3","3","2","3","3","3","1","0","0","1","2","2","3","3","2","0","3","2","2","0","1","3","3","0","0","2","3","0","2","0","2","0","3","2","2","0","2","2","2","3","2","0","2","2","2","2","2","1","1","1","2","1","2","2","2","1","0","0","0"],"type":"scatter3d","mode":"markers","marker":{"color":"rgba(31,119,180,1)","size":[55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55],"sizemode":"area","line":{"color":"rgba(31,119,180,1)"}},"textfont":{"size":55},"error_y":{"color":"rgba(31,119,180,1)","width":55},"error_x":{"color":"rgba(31,119,180,1)","width":55},"line":{"color":"rgba(31,119,180,1)","width":55},"frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<pre class="r"><code>#Was Building 0 but it predicted Building 1
plot_ly(wifidataVal %&gt;% filter(RealBuildingId==0, BUILDINGID==1) , x = ~RealLongitude, y = ~RealLatitude, z = ~RealFloor, size = 0.03) %&gt;% add_markers() %&gt;% layout(scene = list(xaxis = list(title = &quot;Longitude&quot;), yaxis = list(title = &quot;Latitude&quot;), zaxis = list(title = &quot;Floor&quot;))) </code></pre>
<div id="htmlwidget-e412a9bedcad2ca0e560" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-e412a9bedcad2ca0e560">{"x":{"visdat":{"4394da867a0":["function () ","plotlyVisDat"]},"cur_data":"4394da867a0","attrs":{"4394da867a0":{"x":{},"y":{},"z":{},"size":0.03,"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter3d","mode":"markers","inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"scene":{"xaxis":{"title":"Longitude"},"yaxis":{"title":"Latitude"},"zaxis":{"title":"Floor"}},"hovermode":"closest","showlegend":false},"source":"A","config":{"showSendToCloud":false},"data":[{"x":[-7594.03489999846,-7589.06621643408,-7601.38699999824,-7587.43597205984],"y":[4864981.7684,4864985.33224475,4864979.6612,4864986.14340587],"z":["1","2","2","2"],"type":"scatter3d","mode":"markers","marker":{"color":"rgba(31,119,180,1)","size":[55,55,55,55],"sizemode":"area","line":{"color":"rgba(31,119,180,1)"}},"textfont":{"size":55},"error_y":{"color":"rgba(31,119,180,1)","width":55},"error_x":{"color":"rgba(31,119,180,1)","width":55},"line":{"color":"rgba(31,119,180,1)","width":55},"frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<pre class="r"><code>#Was Building 0 but it predicted Building 2
plot_ly(wifidataVal %&gt;% filter(RealBuildingId==0, BUILDINGID==2) , x = ~RealLongitude, y = ~RealLatitude, z = ~RealFloor, size = 0.03) %&gt;% add_markers() %&gt;% layout(scene = list(xaxis = list(title = &quot;Longitude&quot;), yaxis = list(title = &quot;Latitude&quot;), zaxis = list(title = &quot;Floor&quot;)))</code></pre>
<div id="htmlwidget-fea6b24201a9c51d8402" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-fea6b24201a9c51d8402">{"x":{"visdat":{"4394a3aa6b8":["function () ","plotlyVisDat"]},"cur_data":"4394a3aa6b8","attrs":{"4394a3aa6b8":{"x":{},"y":{},"z":{},"size":0.03,"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter3d","mode":"markers","inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"scene":{"xaxis":{"title":"Longitude"},"yaxis":{"title":"Latitude"},"zaxis":{"title":"Floor"}},"hovermode":"closest","showlegend":false},"source":"A","config":{"showSendToCloud":false},"data":[{"x":[-7586.94481643335,-7592.56230000034,-7592.23493529606,-7594.03489999846,-7592.16400306983,-7594.12514444316,-7590.07632944296,-7615.95449716446,-7592.14951715568,-7591.87634305003],"y":[4864985.8591874,4864981.852,4864978.25980826,4864981.7684,4864978.94446059,4864982.07401112,4864985.11419064,4864975.51175694,4864978.76891258,4864978.33054233],"z":["1","0","1","1","1","1","1","0","1","1"],"type":"scatter3d","mode":"markers","marker":{"color":"rgba(31,119,180,1)","size":[55,55,55,55,55,55,55,55,55,55],"sizemode":"area","line":{"color":"rgba(31,119,180,1)"}},"textfont":{"size":55},"error_y":{"color":"rgba(31,119,180,1)","width":55},"error_x":{"color":"rgba(31,119,180,1)","width":55},"line":{"color":"rgba(31,119,180,1)","width":55},"frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<pre class="r"><code>#Confusion Matrix for Floor
confusionMatrix(data= wifidataVal$FLOOR, reference =wifidataVal$RealFloor)</code></pre>
<pre><code>## Confusion Matrix and Statistics
## 
##           Reference
## Prediction   0   1   2   3   4
##          0 108  22   3   0   2
##          1  16 379  14   0   0
##          2   5  57 260  14   0
##          3   3   4  29 155  22
##          4   0   0   0   3  15
## 
## Overall Statistics
##                                                
##                Accuracy : 0.8254               
##                  95% CI : (0.8018, 0.8473)     
##     No Information Rate : 0.4158               
##     P-Value [Acc &gt; NIR] : &lt; 0.00000000000000022
##                                                
##                   Kappa : 0.7571               
##                                                
##  Mcnemar&#39;s Test P-Value : NA                   
## 
## Statistics by Class:
## 
##                      Class: 0 Class: 1 Class: 2 Class: 3 Class: 4
## Sensitivity           0.81818   0.8203   0.8497   0.9012   0.3846
## Specificity           0.97242   0.9538   0.9056   0.9382   0.9972
## Pos Pred Value        0.80000   0.9267   0.7738   0.7277   0.8333
## Neg Pred Value        0.97541   0.8818   0.9406   0.9811   0.9780
## Prevalence            0.11881   0.4158   0.2754   0.1548   0.0351
## Detection Rate        0.09721   0.3411   0.2340   0.1395   0.0135
## Detection Prevalence  0.12151   0.3681   0.3024   0.1917   0.0162
## Balanced Accuracy     0.89530   0.8871   0.8776   0.9197   0.6909</code></pre>
<pre class="r"><code> #Lowest Pos. Predic. Value are  0.7738 for Class    0.7277 </code></pre>
<h2>
3D Buildings for FLOOR
</h2>
<pre class="r"><code>#Type of errors


#Analyzing the lowest Class Recall: Building 0</code></pre>
<h2>
Features Importance
</h2>
<pre class="r"><code>#I want to map the most important variables used to predict the Building
#VarImp of the model
RFvarImpBuilding &lt;- varImp(plsFitWapsBuilding) 
has_rownames(RFvarImpBuilding)</code></pre>
<pre><code>## [1] TRUE</code></pre>
<pre class="r"><code>RFvarImpBuilding &lt;- rownames_to_column(RFvarImpBuilding, var=&quot;WAPS&quot;) 

#Select only the WAPS with VarImp greater than 10
RFvarImpBuilding &lt;- RFvarImpBuilding %&gt;% filter(Overall&gt;10) 


wapsVarImportance &lt;- RFvarImpBuilding$WAPS
#Select only those WAPS with VarImp in the Validation Set
wifidataValRFvarImpBuilding &lt;- wifidataVal %&gt;% select(wapsVarImportance, 521:526)</code></pre>
<pre class="r"><code>#Identify the Rows where a particular WAP has intensity different to 100 and summarize
wifidataValRFvarImpSummarized &lt;- wifidataValRFvarImpBuilding  %&gt;%
 gather( &quot;WAPS&quot;, &quot;Value&quot;, 1:55)  %&gt;%filter(Value&lt;100)  %&gt;%group_by(WAPS) %&gt;% summarise(
meanRRSSI=mean(Value), sdRRSSI=sd(Value), minRRSSI=min(Value), maxRRSSI=max(Value), n_distinct(Value)) %&gt;% left_join( RFvarImpBuilding, by=&quot;WAPS&quot;)

#meanLat=mean(RealLatitude), minLat=min(RealLatitude), maxLat=max(RealLatitude), meanLong=mean(RealLongitude), minLong=min(RealLongitude),  maxLong=max(RealLongitude), meanFloor=mean(as.numeric(RealFloor)), meanBuild=mean(as.numeric(RealBuildingId)),minBuild=min(as.numeric(RealBuildingId)),maxBuild=max(as.numeric(RealBuildingId)),minFloor=min(as.numeric(RealFloor)),maxFloor=max(as.numeric(RealFloor)))  %&gt;% left_join( RFvarImpBuilding, by=&quot;WAPS&quot;)

wifidataValRFvarImpSummarized</code></pre>
<pre><code>## # A tibble: 49 x 7
##    WAPS   meanRRSSI sdRRSSI minRRSSI maxRRSSI `n_distinct(Value)` Overall
##    &lt;chr&gt;      &lt;dbl&gt;   &lt;dbl&gt;    &lt;int&gt;    &lt;int&gt;               &lt;int&gt;   &lt;dbl&gt;
##  1 WAP008     -86.4    8.94      -99      -62                  17    10.6
##  2 WAP011     -76.9   13.7       -96      -45                  36    33.5
##  3 WAP014     -77.1    9.98      -97      -50                  43   433. 
##  4 WAP020     -79.1   10.5       -98      -52                  33    13.9
##  5 WAP025     -72.5   12.2       -94      -48                  38    21.6
##  6 WAP026     -72.7   12.5       -98      -50                  36    23.6
##  7 WAP034     -72.9   12.7       -96      -41                  51   273. 
##  8 WAP036     -74.4   10.9       -95      -42                  48    84.5
##  9 WAP039     -72.3   14.0       -97      -44                  48    77.7
## 10 WAP041     -73.1   10.4       -95      -40                  43    92.1
## # … with 39 more rows</code></pre>
<pre class="r"><code>  #Plot the summarized values of intensity for each WAP
PlotwifidataValRFvarImpSummarized &lt;- wifidataValRFvarImpSummarized %&gt;% ggplot(aes(maxRRSSI, WAPS)) + geom_point(aes(size=Overall)) 
  
  #plotly
PlotwifidataValRFvarImpSummarized %&gt;% ggplotly()</code></pre>
<div id="htmlwidget-a43c52dd0733e69413d0" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-a43c52dd0733e69413d0">{"x":{"data":[{"x":[-62,-45,-50,-52,-48,-50,-41,-42,-44,-40,-38,-35,-35,-46,-46,-51,-50,-44,-44,-45,-43,-50,-50,-46,-46,-46,-40,-40,-53,-41,-48,-50,-40,-49,-37,-45,-52,-47,-47,-52,-67,-49,-47,-55,-56,-54,-49,-50,-49],"y":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49],"text":["Overall:   10.60424<br />maxRRSSI: -62<br />WAPS: WAP008","Overall:   33.47954<br />maxRRSSI: -45<br />WAPS: WAP011","Overall:  433.17459<br />maxRRSSI: -50<br />WAPS: WAP014","Overall:   13.85569<br />maxRRSSI: -52<br />WAPS: WAP020","Overall:   21.57217<br />maxRRSSI: -48<br />WAPS: WAP025","Overall:   23.62422<br />maxRRSSI: -50<br />WAPS: WAP026","Overall:  273.46808<br />maxRRSSI: -41<br />WAPS: WAP034","Overall:   84.48505<br />maxRRSSI: -42<br />WAPS: WAP036","Overall:   77.68091<br />maxRRSSI: -44<br />WAPS: WAP039","Overall:   92.05954<br />maxRRSSI: -40<br />WAPS: WAP041","Overall:   93.77205<br />maxRRSSI: -38<br />WAPS: WAP043","Overall:   72.96649<br />maxRRSSI: -35<br />WAPS: WAP047","Overall:   62.10639<br />maxRRSSI: -35<br />WAPS: WAP048","Overall:  972.56430<br />maxRRSSI: -46<br />WAPS: WAP052","Overall:   35.23438<br />maxRRSSI: -46<br />WAPS: WAP053","Overall:   19.31016<br />maxRRSSI: -51<br />WAPS: WAP059","Overall:   66.79635<br />maxRRSSI: -50<br />WAPS: WAP060","Overall:   74.64344<br />maxRRSSI: -44<br />WAPS: WAP061","Overall:   24.64662<br />maxRRSSI: -44<br />WAPS: WAP063","Overall:   19.16756<br />maxRRSSI: -45<br />WAPS: WAP064","Overall:  305.24020<br />maxRRSSI: -43<br />WAPS: WAP065","Overall:   49.58035<br />maxRRSSI: -50<br />WAPS: WAP069","Overall:  170.81189<br />maxRRSSI: -50<br />WAPS: WAP070","Overall:   37.80457<br />maxRRSSI: -46<br />WAPS: WAP073","Overall:   61.85301<br />maxRRSSI: -46<br />WAPS: WAP074","Overall:   91.12782<br />maxRRSSI: -46<br />WAPS: WAP075","Overall:   44.85503<br />maxRRSSI: -40<br />WAPS: WAP077","Overall:  167.09523<br />maxRRSSI: -40<br />WAPS: WAP078","Overall: 1192.38439<br />maxRRSSI: -53<br />WAPS: WAP087","Overall:  112.60437<br />maxRRSSI: -41<br />WAPS: WAP099","Overall:   36.17011<br />maxRRSSI: -48<br />WAPS: WAP101","Overall:   90.53299<br />maxRRSSI: -50<br />WAPS: WAP117","Overall:  517.93604<br />maxRRSSI: -40<br />WAPS: WAP122","Overall:  175.66970<br />maxRRSSI: -49<br />WAPS: WAP128","Overall:  428.51876<br />maxRRSSI: -37<br />WAPS: WAP132","Overall:   13.94546<br />maxRRSSI: -45<br />WAPS: WAP138","Overall:   12.84347<br />maxRRSSI: -52<br />WAPS: WAP140","Overall: 1535.64241<br />maxRRSSI: -47<br />WAPS: WAP156","Overall: 1089.82699<br />maxRRSSI: -47<br />WAPS: WAP161","Overall:  123.26739<br />maxRRSSI: -52<br />WAPS: WAP203","Overall:   22.03441<br />maxRRSSI: -67<br />WAPS: WAP222","Overall:   17.91953<br />maxRRSSI: -49<br />WAPS: WAP224","Overall:   48.96001<br />maxRRSSI: -47<br />WAPS: WAP225","Overall:   22.83218<br />maxRRSSI: -55<br />WAPS: WAP268","Overall:   18.16145<br />maxRRSSI: -56<br />WAPS: WAP277","Overall:  158.23097<br />maxRRSSI: -54<br />WAPS: WAP495","Overall:  702.95415<br />maxRRSSI: -49<br />WAPS: WAP496","Overall:  785.55505<br />maxRRSSI: -50<br />WAPS: WAP501","Overall: 1153.11477<br />maxRRSSI: -49<br />WAPS: WAP502"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,0,0,1)","opacity":1,"size":[3.77952755905512,6.09399251147816,13.7270900450266,4.6521087126344,5.38214390749094,5.52564067501146,11.6252437027486,7.93894958761419,7.7427908977055,8.14696663323205,8.19263800468926,7.60097653563023,7.25232808074097,18.7883177228341,6.18112727593091,5.20735157555647,7.40700591700623,7.65201580244858,5.59290214997267,5.19560964852563,12.0858740046505,6.80063686626641,9.90456564764409,6.3033237590164,7.24377483099441,8.1219165339093,6.61158756182385,9.83310131596661,20.4150142153552,8.66681111110149,6.22632217935855,8.10584790736557,14.6791939594944,9.99673369394578,13.6721377790939,4.66407259203393,4.50365745560712,22.6771653543307,19.6768034077941,8.91591912351902,5.41556592733926,5.08835682445322,6.77649837102141,5.47169738777065,5.1098223387136,9.65915301808506,16.5125054323428,17.2506639648877,20.136287126053],"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)"}},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":26.2283105022831,"r":7.30593607305936,"b":40.1826484018265,"l":60.6392694063927},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-68.6,-33.4],"tickmode":"array","ticktext":["-60","-50","-40"],"tickvals":[-60,-50,-40],"categoryorder":"array","categoryarray":["-60","-50","-40"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"maxRRSSI","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.4,49.6],"tickmode":"array","ticktext":["WAP008","WAP011","WAP014","WAP020","WAP025","WAP026","WAP034","WAP036","WAP039","WAP041","WAP043","WAP047","WAP048","WAP052","WAP053","WAP059","WAP060","WAP061","WAP063","WAP064","WAP065","WAP069","WAP070","WAP073","WAP074","WAP075","WAP077","WAP078","WAP087","WAP099","WAP101","WAP117","WAP122","WAP128","WAP132","WAP138","WAP140","WAP156","WAP161","WAP203","WAP222","WAP224","WAP225","WAP268","WAP277","WAP495","WAP496","WAP501","WAP502"],"tickvals":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49],"categoryorder":"array","categoryarray":["WAP008","WAP011","WAP014","WAP020","WAP025","WAP026","WAP034","WAP036","WAP039","WAP041","WAP043","WAP047","WAP048","WAP052","WAP053","WAP059","WAP060","WAP061","WAP063","WAP064","WAP065","WAP069","WAP070","WAP073","WAP074","WAP075","WAP077","WAP078","WAP087","WAP099","WAP101","WAP117","WAP122","WAP128","WAP132","WAP138","WAP140","WAP156","WAP161","WAP203","WAP222","WAP224","WAP225","WAP268","WAP277","WAP495","WAP496","WAP501","WAP502"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"WAPS","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","showSendToCloud":false},"source":"A","attrs":{"4395980a9fb":{"size":{},"x":{},"y":{},"type":"scatter"}},"cur_data":"4395980a9fb","visdat":{"4395980a9fb":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<pre class="r"><code>#Plot the same info but in coordinates
#Bind the Two dataframes
#plot_ly(wifidataValRFvarImpSummarized %&gt;% filter(round(meanBuild)==2), x = ~meanLong, y = ~meanLat, z = ~meanFloor, size = 0.03) %&gt;% add_markers() %&gt;% layout(scene = list(xaxis = list(title = &quot;Longitude&quot;), yaxis = list(title = &quot;Latitude&quot;), zaxis = list(title = &quot;Floor&quot;)))</code></pre>
<h1>
KNN
</h1>
<pre class="r"><code>#KNN

#Load model from Building
#load(&quot;WapsBuildingKnn.rda&quot;)

#Create a new column with predictions
#wifidataVal$BUILDINGIDKNN &lt;- plsFitWapsBuildingTRAINVal</code></pre>
<h2>
Consufion Matrix
</h2>
<pre class="r"><code>#Confusion Matrix for Validation
#confusionMatrix(data= wifidataVal$BUILDINGIDKNN, reference =wifidataVal$RealBuildingId)</code></pre>
<h2>
3D Buildings
</h2>
<pre class="r"><code>#Analyzing error in Building 0
#Was Building 0 but it predicted Building 2
#plot_ly(wifidataVal %&gt;% filter(RealBuildingId==0, BUILDINGIDKNN==2) , x = ~RealLongitude, y = ~RealLatitude, z = ~RealFloor, size = 0.03) %&gt;% add_markers() %&gt;% layout(scene = list(xaxis = list(title = &quot;Longitude&quot;), yaxis = list(title = &quot;Latitude&quot;), zaxis = list(title = &quot;Floor&quot;)))


#Analyzing the lowest Class Recall: Building 1
#Plot Building 1
#plot_ly(wifidataVal %&gt;% filter(RealBuildingId==1) , x = ~RealLongitude, y = ~RealLatitude, z = ~RealFloor, size = 0.03) %&gt;% add_markers() %&gt;% layout(scene = list(xaxis = list(title = &quot;Longitude&quot;), yaxis = list(title = &quot;Latitude&quot;), zaxis = list(title = &quot;Floor&quot;)))

#Was Building 1 but it predicted Building 0
#plot_ly(wifidataVal %&gt;% filter(RealBuildingId==1, BUILDINGIDKNN==0) , x = ~RealLongitude, y = ~RealLatitude, z = ~RealFloor, size = 0.03) %&gt;% add_markers() %&gt;% layout(scene = list(xaxis = list(title = &quot;Longitude&quot;), yaxis = list(title = &quot;Latitude&quot;), zaxis = list(title = &quot;Floor&quot;)))

#Was Building 1 but it predicted Building 2
#plot_ly(wifidataVal %&gt;% filter(RealBuildingId==1, BUILDINGIDKNN==2) , x = ~RealLongitude, y = ~RealLatitude, z = ~RealFloor, size = 0.03) %&gt;% add_markers() %&gt;% layout(scene = list(xaxis = list(title = &quot;Longitude&quot;), yaxis = list(title = &quot;Latitude&quot;), zaxis = list(title = &quot;Floor&quot;)))

#FalsePositiveof0 &lt;- wifidataVal %&gt;% filter(RealBuildingId==1, BUILDINGIDKNN==0) %&gt;%  gather( &quot;RRSSI&quot;, &quot;Value&quot;, 1:520)
 
#summary(FalsePositiveof0$Value)
#Analyzing distribution in Building 2
#plot_ly(wifidataVal %&gt;% filter(RealBuildingId==2) , x = ~RealLongitude, y = ~RealLatitude, z = ~RealFloor, size = 0.03) %&gt;% add_markers() %&gt;% layout(scene = list(xaxis = list(title = &quot;Longitude&quot;), yaxis = list(title = &quot;Latitude&quot;), zaxis = list(title = &quot;Floor&quot;)))

#describe(FalsePositiveof0 %&gt;% filter(Value&lt;100))



#Because the False Positives of Building 2 are the biggest I wanted to map the Floors</code></pre>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
